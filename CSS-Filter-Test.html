<!-- 
This code is free for private or commercial use as long as you don't remove or change the copyright notes.
Maleki B. Copyright Â©2021
BehzatMaleki@Gmail.com
Github.com/BehzatMaleki
-->

<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>CSS Filter Test</title>
	<style>
		div#background_image{
			background: url('');
			background-size: contain;
			background-repeat: no-repeat;
			background-position: center;
			background-color: rgba(128, 128, 128, 0.5)
		}
		.code-div{
			border-top:1px solid silver; 
			margin-top:5px;
			padding-right:20px;
			padding-left:20px;
		}
		a{
			color:#2ba0f3;
			text-decoration-line: none;
		}
		a:hover{
			color:orange;
			text-decoration-line: none;
		}
	</style>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script>
		$(function() {
			resetAll();
		});
		
		function imageChange(input) {
			if (input.files && input.files[0]) {
				var reader = new FileReader();
				reader.onload = function (e) {
					$('#background_image').css('background','url('+e.target.result+')');
					$('#background_image').css('background-size', 'contain');
					$('#background_image').css('background-repeat', 'no-repeat');
					$('#background_image').css('background-position', 'center');
				};
				reader.readAsDataURL(input.files[0]);
			}
		}
		
		function filterChange(val,valueItem) {
			$(valueItem).html(val);
			var f_css = 'contrast('+$('#contrast_slider').val()+'%) brightness('+$('#brightness_slider').val()+'%) grayscale('+$('#grayscale_slider').val()+'%) saturate('+$('#saturate_slider').val()+'%) sepia(' + $('#sepia_slider').val() + '%) invert('+$('#invert_slider').val()+'%) hue-rotate('+$('#hue_rotate_slider').val()+'deg) blur('+$('#blur_slider').val()+'px)';
			$('#background_image').css('filter',f_css);
			var o_css = 'rgba('+$('#r_slider').val()+', '+$('#g_slider').val()+', '+$('#b_slider').val()+', '+$('#a_slider').val()+')';
			$('#image_overlay').css('background-color', o_css);
			$('#image_overlay').css('width', '100%');
			$('#image_overlay').css('height', '100%');
			$('#css-code').html("div#background_image { filter: " + f_css + " ; }<br>div#image_overlay { background-color: " + o_css + "; width:100% ; height:100% ; }");
		}
		
		function resetAll() {
			var f_css = 'contrast(100%) brightness(100%) grayscale(0%) saturate(100%) sepia(0%) invert(0%) hue-rotate(0deg) blur(0px)';
			$('#background_image').css('filter',f_css);
			$('#contrast_slider').val('100').next().html('100');
			$('#brightness_slider').val('100').next().html('100');
			$('#grayscale_slider').val('0').next().html('0');
			$('#saturate_slider').val('100').next().html('100');
			$('#sepia_slider').val('0').next().html('0');
			$('#invert_slider').val('0').next().html('0');
			$('#hue_rotate_slider').val('0').next().html('0');
			$('#blur_slider').val('0').next().html('0');
			var o_css = 'rgba(0, 0, 0, 0)';
			$('#image_overlay').css('background-color', o_css);
			$('#image_overlay').css('width', '100%');
			$('#image_overlay').css('height', '100%');
			$('#r_slider').val('0').next().html('0');
			$('#g_slider').val('0').next().html('0');
			$('#b_slider').val('0').next().html('0');
			$('#a_slider').val('0').next().html('0');
			$('#css-code').html("div#background_image { filter: " + f_css + " ; }<br>div#image_overlay { background-color: " + o_css + "; width:100% ; height:100% ; }");
		}	
	</script>
</head>
<body>
	<table style="width:100%">
		<tr style="height:100%;">
			<td align="left"  style="padding-left:20px;">
				<div style="width:200px">Contrast <a href=# onclick="$(this).parent().next('input').val(100).change(); return false">[reset]</a></div>
				<input style="width:70%" id="contrast_slider" type="range" min="0" max="300" value="100" onchange="filterChange(this.value,$(this).next())"> <div style="display:inline-block;width:35px;text-align: right;">100</div> %
				<br><br>

				<div style="width:200px">Brightness <a href=# onclick="$(this).parent().next('input').val(100).change(); return false">[reset]</a></div>
				<input style="width:70%" id="brightness_slider" type="range" min="0" max="1000" value="100" onchange="filterChange(this.value,$(this).next())"> <div style="display:inline-block;width:35px;text-align: right;">100</div> %
				<br><br>

				<div style="width:200px">Grayscale <a href=# onclick="$(this).parent().next('input').val(0).change(); return false">[reset]</a></div>
				<input style="width:70%" id="grayscale_slider" type="range" min="0" max="100" value="0" onchange="filterChange(this.value,$(this).next())"> <div style="display:inline-block;width:35px;text-align: right;">0</div> %
				<br><br>

				<div style="width:200px">Saturate <a href=# onclick="$(this).parent().next('input').val(100).change(); return false">[reset]</a></div>
				<input style="width:70%" id="saturate_slider" type="range" min="0" max="700" value="100" onchange="filterChange(this.value,$(this).next())"> <div style="display:inline-block;width:35px;text-align: right;">100</div> %
				<br><br>

				<div style="width:200px">Sepia <a href=# onclick="$(this).parent().next('input').val(0).change(); return false">[reset]</a></div>
				<input style="width:70%" id="sepia_slider" type="range" min="0" max="100" value="0" onchange="filterChange(this.value,$(this).next())"> <div style="display:inline-block;width:35px;text-align: right;">0</div> %
				<br><br>

				<div style="width:200px">Invert <a href=# onclick="$(this).parent().next('input').val(0).change(); return false">[reset]</a></div>
				<input style="width:70%" id="invert_slider" type="range" min="0" max="100" value="0" onchange="filterChange(this.value,$(this).next())"> <div style="display:inline-block;width:35px;text-align: right;">0</div> %
				<br><br>

				<div style="width:200px">Hue-rotate <a href=# onclick="$(this).parent().next('input').val(0).change(); return false">[reset]</a></div>
				<input style="width:70%" id="hue_rotate_slider" type="range" min="0" max="360" value="0" onchange="filterChange(this.value,$(this).next())"> <div style="display:inline-block;width:35px;text-align: right;">0</div> deg
				<br><br>

				<div style="width:200px">Blur <a href=# onclick="$(this).parent().next('input').val(0).change(); return false">[reset]</a></div>
				<input style="width:70%" id="blur_slider" type="range" min="0" max="10" value="0" onchange="filterChange(this.value,$(this).next())"> <div style="display:inline-block;width:35px;text-align: right;">0</div> px
				<br><br>
			</td>
			
			<td width="700px" align="center">
				<div id="background_image" style="height:500px;border:0"><div id="image_overlay""></div></div>
				<div align="center" style="margin-top:10px;">
					<button onclick="document.getElementById('getFile').click()">Select an Image</button>
					<input id="getFile" type="file" accept="image/png, image/jpeg" onchange="imageChange(this);" style="display:none">
					<button onclick="resetAll()">Reset Filters</button>
				</div>
			</td>
			
			<td align="left"  style="padding-left:20px;">
				<div><h3>Color Overlay</h3></div>
				<div style="width:200px">Red <a href=# onclick="$(this).parent().next('input').val(0).change(); return false">[reset]</a></div>
				<input style="width:70%" id="r_slider" type="range" min="0" max="255" value="0" onchange="filterChange(this.value,$(this).next())"> <div style="display:inline-block;width:35px;text-align: right;">0</div>
				<br><br>

				<div style="width:200px">Green <a href=# onclick="$(this).parent().next('input').val(0).change(); return false">[reset]</a></div>
				<input style="width:70%" id="g_slider" type="range" min="0" max="255" value="0" onchange="filterChange(this.value,$(this).next())"> <div style="display:inline-block;width:35px;text-align: right;">0</div>
				<br><br>

				<div style="width:200px">Blue <a href=# onclick="$(this).parent().next('input').val(0).change(); return false">[reset]</a></div>
				<input style="width:70%" id="b_slider" type="range" min="0" max="255" value="0" onchange="filterChange(this.value,$(this).next())"> <div style="display:inline-block;width:35px;text-align: right;">0</div>
				<br><br>
				
				<div style="width:200px">Alpha <a href=# onclick="$(this).parent().next('input').val(0).change(); return false">[reset]</a></div>
				<input style="width:70%" id="a_slider" type="range" min="0" max="1" step="0.1" value="0" onchange="filterChange(this.value,$(this).next())"> <div style="display:inline-block;width:35px;text-align: right;">0</div>
				<br><br>
			</td>
		</tr>
		
		<tr>
			<td colspan="3">
				<div class="code-div"><pre id="css-code"></pre></div>
			</td>
		</tr>
	</table>
</body>
</html>
